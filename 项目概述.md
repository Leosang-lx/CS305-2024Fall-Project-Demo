# 项目概述

随着全球远程工作和学习的普及，视频会议软件已成为人们日常生活和工作的关键工具。通过视频会议，用户可以跨越地理位置的限制，进行实时的语音、视频以及文字交流。视频会议的实现高度依赖于计算机网络的核心原理和协议：

- **网络协议与传输控制**：视频会议需要实时传输音频和视频数据，因此对网络协议的理解非常重要。其包括**TCP/IP**协议、**UDP**、**RTP**（实时传输协议）等协议，这些协议决定了如何在网络上有效、可靠地传输数据。尤其是视频会议中，由于实时性要求较高，通常使用UDP与RTP组合来减少延迟。
- **延迟与带宽管理**：视频会议质量与网络延迟和带宽有密切关系，**延迟**、**带宽**、**抖动**等因素对视频会议的用户体验至关重要。例如，在网络拥塞时，如何动态调整视频码率，以确保流畅的音视频传输。
- **网络层与路由**：在不同的网络间传输数据包，需要学习路由协议（如**OSPF**、**BGP**），了解数据包如何在网络中选择最佳路径。视频会议系统中的数据包会经过许多路由节点，理解这些路由协议有助于优化传输路径，减少延迟。
- **多播与组播技术**：视频会议中通常涉及多方通信，课程中的**多播**或**组播**概念正是为此设计的。使用组播技术可以减少重复的数据传输，优化带宽使用。
- **流量控制与拥塞控制**：课程中学到的**流量控制**与**拥塞控制**机制对于视频会议的流量管理至关重要。例如，在网络负载高时，拥塞控制机制可以帮助减少丢包率，提高视频传输的稳定性。
- **网络安全与加密**：视频会议需要保护用户隐私和数据安全。课程中涉及的**加密协议**（如TLS、SSL）和安全防护措施能够帮助设计一个安全的视频会议系统，确保会议内容不会被窃听或篡改。

**本项目主要包括两部分，代码实现和课程报告：代码实现要求同学们以小组为单位开发一个基础的视频会议demo；课程报告要求同学们对现有的视频会议软件进行调研并分析其在面对复杂网络环境时所采用的应对方案。**

# 代码实现(80%)

为了实现实时通信，视频会议背后需要使用多种网络协议来确保数据能够高效、可靠地传输。视频会议中常用的网络协议包括：

- TCP（传输控制协议）：提供可靠的数据传输，确保信息包按顺序到达且没有丢失。它通常用于文件传输、文本聊天等对传输可靠性要求较高的功能。
- UDP（用户数据报协议）：与TCP不同，UDP是一个不可靠的协议，不保证数据包的顺序或是否到达，但它的低延迟特点非常适合实时视频和音频的传输。
- RTP（实时传输协议）：通常与UDP结合使用，RTP是专为实时传输设计的协议，特别适用于音频和视频流媒体的传输。
- RTCP（实时传输控制协议）：与RTP配合使用，提供对音视频流的统计和质量反馈，帮助监控和调整流传输的质量。
- SIP（会话发起协议）：常用于建立、修改和终止多媒体会话（如音频、视频通话）。
- STUN和TURN：用于穿越NAT和防火墙，帮助客户端发现自己的公网IP地址，并通过服务器中转无法直接连接的客户端。

在视频会议系统中，不同任务的传输模式也有明显的差异。例如，文字和文件的传输需要确保数据的完整性和顺序，因此依赖于TCP协议。而音视频则对实时性要求更高，即使个别数据包丢失，也不影响整体体验，因此常通过UDP或基于流传输的协议来实现。

大多数视频会议平台依赖于服务器来实现通信的中转。服务器不仅负责管理用户的会话，还用于转发客户端之间的音视频流。客户端通过服务器将自己的音视频数据发送给其他参会者，从而实现会议中的多方交互。

## 1.基础部分（80分）

在本项目的基础功能部分，你需要实现一个**客户端-服务器模式(CS)**的视频会议框架。该框架通过服务器管理多个会议室和用户的操作。用户可以通过客户端与服务器进行通信，实现创建会议、加入会议、退出会议等功能。服务器负责记录和管理所有会议的状态。

在每个会议中，所有用户可以同时发送视频、音频和文字消息。服务器负责处理这些信息的分发，确保每个客户端能够正确接收并显示来自其他用户的内容。具体要求如下：

### 基础传输（20分）

#### 视频功能（10分）：

- 每个用户可以选择打开或关闭摄像头。打开摄像头后，客户端应将视频流发送至服务器。
- 服务器负责将该视频流转发给会议中的所有其他用户。
- 客户端应显示所有打开摄像头的用户的画面，可以通过分屏等方式展示多用户的实时视频。

#### 音频功能（10分）：

- 每个用户可以选择打开或关闭麦克风。打开麦克风后，客户端应将音频流发送至服务器。
- 服务器需要接收并合并来自多个用户的音频流，将混合后的音频流分发给所有参会用户。
- 客户端应播放来自其他用户的音频，并能同时处理多路音频流的播放。

<!-- #### 文字消息：

- 用户可以通过客户端发送文字消息，消息将通过服务器分发给其他参会者。
- 客户端应按照消息发送的时间顺序，分条显示来自不同用户的文字消息。
- 每条消息应包括发送者的名称和发送时间，以便参会者快速了解信息来源。 -->



### 单一会议模式（20分）：

该模式下需要有两个用户与一个服务器参与，其中一个用户创建并加入一个会议，另一个用户也加入该会议。

- 创建会议（5分）：用户可以通过客户端发送请求到服务器，创建一个新的会议。会议创建成功后，将允许其他用户加入该会议。
- 加入会议（5分）：用户可以查看当前可加入的会议列表，并选择加入任意会议。加入会议后，用户将参与该会议。
- 退出会议（5分）：用户可以随时退出当前会议，离开会议不会影响其他用户继续参与该会议。
- 取消会议（5分）：会议的创建者可以随时取消自己创建的会议。一旦会议被取消，其他用户将无法再加入该会议，已在会议中的用户将被移除。

### 复杂会议模式（40 分） 

#### 多人参与会议场景（20分）

会议系统需要支持多个用户的同时参与，确保每个用户都能流畅地进行音频、视频和文字交流。具体要求如下：

- 多用户支持（5分）：每个会议至少应支持三个用户同时参与。所有参会用户应能够自由加入会议，并与其他参会者进行互动。
- 音视频传输（5分）：所有参会用户应能够同时传输音频和视频。客户端应能够接收和显示来自其他用户的音频和视频流，确保所有用户都可以看到和听到其他参会者的内容。
- 随意加入与离开（5分）：每个用户可以随意地加入和离开会议。用户的加入和离开不应影响其他用户的正常会议进程。无论是加入者还是会议中已存在的用户，都应继续正常进行音视频传输和消息交流。
- 用户离开处理（5分）：当某个用户离开会议后，服务器应立即停止传输该用户的音频和视频数据至其他用户。同时，该用户的客户端也应停止接收来自会议的所有音频和视频流，确保已离开用户不会再收到任何会议信息。

### 多会议并行场景（20分）

- 多个会议同时进行（5分）：服务器应支持在同一时间内有多个会议同时进行。每个会议的创建者可以不同，允许不同用户创建独立的会议。
- 独立的会议生命周期（5分）：每个会议的开始与结束是独立的，互不影响。一个会议的进行不应影响其他会议的状态，确保所有会议能够正常进行。
- 会议内容隔离（10分）：每个会议的内容应互相隔离，任何会议都不能接收到其他会议的音频或视频数据。服务器应确保在传输时，音频和视频流仅在同一会议的用户之间进行传输，从而维护各个会议的私密性和独立性。

## 2. bonus部分（20分）

在本项目的bonus部分，你需要实现一个**P2P**的视频会议框架。该框架允许客户进行直接通信，服务器负责只记录所有会议的状态。

#### 视频功能（10分）：

- 每个用户可以选择打开或关闭摄像头。打开摄像头后，客户端应将视频流发送至服务器。
- 服务器负责将该视频流转发给会议中的所有其他用户。
- 客户端应显示所有打开摄像头的用户的画面，可以通过分屏等方式展示多用户的实时视频。

#### 音频功能（10分）：

- 每个用户可以选择打开或关闭麦克风。打开麦克风后，客户端应将音频流发送至服务器。
- 服务器需要接收并合并来自多个用户的音频流，将混合后的音频流分发给所有参会用户。
- 客户端应播放来自其他用户的音频，并能同时处理多路音频流的播放。

# 课程报告(20%)

### 视频会议应用在生产环境中往往需要面临多种网络问题，这些网络问题通常是复杂且相互影响。

- ### 介绍demo的实现细节包括基础部分和bonus部分（不要贴代码，简要介绍框架和使用的协议）。
- ### 分析CS框架和P2P框架的优缺点和适应的场景，基于该分析制定切换规则。
- ### 列举出视频会议应用可能面临的复杂网络环境，并分析视频会议demo在面临这些网络复杂环境时可能产生的问题。
- ### 调研现有的视频会议软件，分析其在面临这些复杂网络环境时其采取的策略。